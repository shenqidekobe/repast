<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:include="link">
    <link href="/static/bootstrap-table/bootstrap-table.min.css" rel="stylesheet">
<body>
<div id="wrapper">
    <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
        <div th:include="top"></div>
        <div th:include="left"></div>
    </nav>
    <div id="page-wrapper">
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">菜品管理中心</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <ol class="breadcrumb">
                        <li><strong><span style="color: #27a0d7">菜品列表</span></strong></li>
                    </ol>
                    <div class="container" style="width: 100%">
                        <div id="toolbar" class="btn-group">
                            <button type="button" class="btn btn-info btn-sm rightSize" id="addBtn">
                                <i class="glyphicon glyphicon-plus" aria-hidden="true"></i> 新增菜品
                            </button>

                            <button style="margin-left: 10px" type="button" class="btn btn-info btn-sm rightSize"
                                    id="categoryBtn">
                                <i class="glyphicon glyphicon-tags" aria-hidden="true"></i> 菜品分类
                            </button>

                            <button style="margin-left: 10px" type="button" class="btn btn-info btn-sm rightSize"
                                    id="specBtn">
                                <i class="glyphicon glyphicon-stats" aria-hidden="true"></i> 菜品规格
                            </button>

                            <button style="margin-left: 10px" type="button" class="btn btn-info btn-sm rightSize"
                                    id="auxBtn">
                                <i class="glyphicon glyphicon-cutlery" aria-hidden="true"></i> 菜品辅料
                            </button>

                        </div>
                        <table id="dataTable"></table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="/static/jquery/jquery.min.js"></script>
<script src="/static/bootstrap/js/bootstrap.min.js"></script>
<script src="/static/metisMenu/metisMenu.min.js"></script>
<script src="/static/dist/js/sb-admin-2.js"></script>
<script src="/static/bootstrap-table/bootstrap-table.min.js"></script>
<script src="/static/bootstrap-table/bootstrap-table-zh-CN.min.js"></script>
<script src="/static/admin/bootstrptableSetting.js"></script>
<script src="/static/toastr/toastr.min.js"></script>
<script src="/static/toastr/toastr.confirm.js"></script>
<script src="/static/admin/goods/list.js"></script>
<script src="/static/bootstrap-dialog/js/bootstrap-dialog.min.js"></script>

<script>
    var dataTable = null;
    $("#addBtn").click(function () {
        location.href = '/goods/edit';
    });
    $("#categoryBtn").click(function () {
        location.href = '/goods/category';
    });
    $("#specBtn").click(function () {
        location.href = '/goods/spec';
    });
    $("#auxBtn").click(function () {
        location.href = '/goods/aux';
    });
    window.operateEvents = {
        "click #edit": function (e, value, row, index) {
            location.href = '/goods/edit?id=' + row.id;
            return false;
        }, "click #delete": function (e, value, row, index) {
            BootstrapDialog.confirm({
                title : '确认',
                message : '是否确认删除? ',
                type : BootstrapDialog.TYPE_WARNING, // <-- Default value is
                // BootstrapDialog.TYPE_PRIMARY
                closable : true, // <-- Default value is false，点击对话框以外的页面内容可关闭
                draggable : true, // <-- Default value is false，可拖拽
                btnCancelLabel : '取消', // <-- Default value is 'Cancel',
                btnOKLabel : '确定', // <-- Default value is 'OK',
                btnOKClass : 'btn-warning', // <-- If you didn't specify it, dialog type
                size : BootstrapDialog.SIZE_SMALL,
                // 对话框关闭的时候执行方法
                callback : function(result) {
                    // 点击确定按钮时，result为true
                    if (result) {
                        location.href = 'goods/remove?id=' + row.id;
                    }
                }
            });
            return false;
        }
    }
    var url = "/goods/listData.do?random=" + Math.random();
    var columns = [
        {
            field: '', title: '菜品', formatter: function (value, row, index) {
            return '<img src="/common/img/' + row.pic + '/0/" width=80px height=80px>';
        }
        },
        {field: 'name', title: '',},
        {field: 'amount', title: '价格',},
        {field: 'categoryName', title: '分类',},
        {field: 'specsName', title: '规格',},
        {
            field: 'createTime', title: '发布时间', formatter: function (value, row, index) {
            return new Date(value).Format('yyyy-MM-dd hh:mm:ss');
        }
        },
        {field: 'opers', title: '操作', events: operateEvents, formatter: operateFormatter}]

    function operateFormatter(value, row, index) {
        return "<i class=\"fa fa-edit fa-lg\" id='edit'></i>" + " | " +
            "<i class=\"fa fa-trash-o fa-lg\" id='delete'></i>";
    }

    loadTable(url, columns, function (options) {
        dataTable = $('#dataTable').bootstrapTable(options);
    });

</script>

</body>
</html>
